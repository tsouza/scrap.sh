#cloud-config

coreos:
  update:
    reboot-strategy: off
  etcd2:
    discovery: https://discovery.etcd.io/15eff628420a3291f7b8adcd58cc2e1e
    advertise-client-urls: http://$private_ipv4:2379,http://$private_ipv4:4001
    initial-advertise-peer-urls: http://$private_ipv4:2380
    listen-client-urls: http://0.0.0.0:2379,http://0.0.0.0:4001
    listen-peer-urls: http://$private_ipv4:2380,http://$private_ipv4:7001
  units:
    - name: etcd2.service
      command: start
    - name: fleet.service
      command: start


write_files:
  - path: /home/core/.docker/config.json
    owner: core:core
    permissions: '0644'
    content: |
      { "auths": {
        "https://700122456994.dkr.ecr.us-east-1.amazonaws.com": {
          "auth": "QVdTOkNpQndtMFlhSVNKZVJ0Sm01bjFHNnVxZWVrWHVvWFhQZTVVRmNlOVJxOC8xNHhLeUJnRUJBZ0I0Y0p0R0dpRWlYa2JTWnVaOVJ1cnFubnBGN3FGMXozdVZCWEh2VWF2UDllTUFBQU1KTUlJREJRWUpLb1pJaHZjTkFRY0dvSUlDOWpDQ0F2SUNBUUF3Z2dMckJna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURNZnhLdTVYN0ZKbkVTNlhNUUlCRUlDQ0FyeS8zRTVBb2N1c1FZOEIzS2pBR2N1SjF3dHhuZFpKZnUwRm03a3NRWFI5eFhTRU8vZldSUEcxVHJqeHBGZ3NYRkxrblBsRzF1bEtqanFHMmdwUzNkdEN1WUVtbVcrbG9nWDRsODNXN3M3b3hkNi9DOHF0c1huQWFLTmRHVDdGTDJOaVR6T2EvcUNOSUFBNHJKSDhwY0JPTm5aU0lsU043Zkhib3pSWVhxc045YTNHcWlZWCtnOUh1WUN4UFZjTktxZGZSVDJ2TlpTMVZKc3lUc2luYzFjN09yK1NCeGxNb2p6N1hxdm9TcVhMVWRkYm95NGtxbVdRRldiQkUraWRzZGoyS2k1Y29zeTZMMGdsTFpJOFllc2huUnp5UTJnWk44ZlgvL0RvVnIwTy9QYmczYTZiMUN0Y1FNU0tBTnF0d082RzNrNWxicEVseXQxK3pUTFRaUUV4QXg5ZXZiZXV6ZWtoampibDRKOVo3VkVtbWhRSDlVemtZUnlSRGR6NHV2ai93ZW1oSDdoSmlQUE4xNzk5TjNad0FRQ1ovMDBOOG5TUzBZdkh5RkFPTzFWTUliVXQyMTlPNTdnZWlGVldseEY2TDg0dlB1RG1wQ3U1RXFTMjhVSEdwL29BRUFGbUxBNURUeVd6QXZZT0NSb2pIUS93K2NZVnl3WDJEL0dqb1lnOUNvQTlXUStibjJJN2ZDeEM5Y1gzVEtjWENTRDJLZVhtWm1pTU8yVmVjVkp1VlVId1JSZVZ5MXd3SDMvazJ6eFJmNG94Q0pvQTFmcU04UmJ1MUk1V25MRmZrckNFQk9EMTNpS3MxZ2gzazdvc1Fia2xRd0NJbVdabjdzbWE5LzUwMTQvZElGVDV6TTY4bEdWVzZuQjNab3FiZlNtcXhwMXY1MkFWQUN4Z0drUzU2clptTWFaZFhpVTViNmI3VDJGSFN4ZWVtUytDbjFEdUYzc3htMnJsUVdnSklkWi83T0VtMjIrL3MxUGlDWWo1cnZDQUc5UmxLeVpRT1kxNlVObkliZDFsaU9NLzNKWG5sRmNCS1g5dXI0T1hzZDQyUTdWNFZNK2oxT0diV2hoTUJjNEpVS2ZJanh2TUNxUU9LYmJTc0ZFUThNajBxQkFZcU1oTWdGK2RBWlRmc0JnanV2QnVrTFBGczZBV3RrekVrNUNqLzdWTmJjazZ1STB1WDh2NzJteHNiU0ZRb3RVVVJHdHd5bWZhditxMWtYTkFvdzlDdFVyRA==",
          "email": "none"
        }
      }}
  - path: /home/root/.docker/config.json
    owner: root:root
    permissions: '0644'
    content: |
      { "auths": {
        "https://700122456994.dkr.ecr.us-east-1.amazonaws.com": {
          "auth": "QVdTOkNpQndtMFlhSVNKZVJ0Sm01bjFHNnVxZWVrWHVvWFhQZTVVRmNlOVJxOC8xNHhLeUJnRUJBZ0I0Y0p0R0dpRWlYa2JTWnVaOVJ1cnFubnBGN3FGMXozdVZCWEh2VWF2UDllTUFBQU1KTUlJREJRWUpLb1pJaHZjTkFRY0dvSUlDOWpDQ0F2SUNBUUF3Z2dMckJna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURNZnhLdTVYN0ZKbkVTNlhNUUlCRUlDQ0FyeS8zRTVBb2N1c1FZOEIzS2pBR2N1SjF3dHhuZFpKZnUwRm03a3NRWFI5eFhTRU8vZldSUEcxVHJqeHBGZ3NYRkxrblBsRzF1bEtqanFHMmdwUzNkdEN1WUVtbVcrbG9nWDRsODNXN3M3b3hkNi9DOHF0c1huQWFLTmRHVDdGTDJOaVR6T2EvcUNOSUFBNHJKSDhwY0JPTm5aU0lsU043Zkhib3pSWVhxc045YTNHcWlZWCtnOUh1WUN4UFZjTktxZGZSVDJ2TlpTMVZKc3lUc2luYzFjN09yK1NCeGxNb2p6N1hxdm9TcVhMVWRkYm95NGtxbVdRRldiQkUraWRzZGoyS2k1Y29zeTZMMGdsTFpJOFllc2huUnp5UTJnWk44ZlgvL0RvVnIwTy9QYmczYTZiMUN0Y1FNU0tBTnF0d082RzNrNWxicEVseXQxK3pUTFRaUUV4QXg5ZXZiZXV6ZWtoampibDRKOVo3VkVtbWhRSDlVemtZUnlSRGR6NHV2ai93ZW1oSDdoSmlQUE4xNzk5TjNad0FRQ1ovMDBOOG5TUzBZdkh5RkFPTzFWTUliVXQyMTlPNTdnZWlGVldseEY2TDg0dlB1RG1wQ3U1RXFTMjhVSEdwL29BRUFGbUxBNURUeVd6QXZZT0NSb2pIUS93K2NZVnl3WDJEL0dqb1lnOUNvQTlXUStibjJJN2ZDeEM5Y1gzVEtjWENTRDJLZVhtWm1pTU8yVmVjVkp1VlVId1JSZVZ5MXd3SDMvazJ6eFJmNG94Q0pvQTFmcU04UmJ1MUk1V25MRmZrckNFQk9EMTNpS3MxZ2gzazdvc1Fia2xRd0NJbVdabjdzbWE5LzUwMTQvZElGVDV6TTY4bEdWVzZuQjNab3FiZlNtcXhwMXY1MkFWQUN4Z0drUzU2clptTWFaZFhpVTViNmI3VDJGSFN4ZWVtUytDbjFEdUYzc3htMnJsUVdnSklkWi83T0VtMjIrL3MxUGlDWWo1cnZDQUc5UmxLeVpRT1kxNlVObkliZDFsaU9NLzNKWG5sRmNCS1g5dXI0T1hzZDQyUTdWNFZNK2oxT0diV2hoTUJjNEpVS2ZJanh2TUNxUU9LYmJTc0ZFUThNajBxQkFZcU1oTWdGK2RBWlRmc0JnanV2QnVrTFBGczZBV3RrekVrNUNqLzdWTmJjazZ1STB1WDh2NzJteHNiU0ZRb3RVVVJHdHd5bWZhditxMWtYTkFvdzlDdFVyRA==",
          "email": "none"
        }
      }}
